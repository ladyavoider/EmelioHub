local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TabbedWindow"
screenGui.Parent = game.CoreGui
screenGui.ResetOnSpawn = false

local windowFrame = Instance.new("Frame")
windowFrame.Name = "Window"
windowFrame.Size = UDim2.new(0,   400,   0,   300)
windowFrame.Position = UDim2.new(0.5,   -200,   0.5,   -150)
windowFrame.BackgroundColor3 = Color3.fromRGB(30,   30,   30)
windowFrame.BorderSizePixel = 0
windowFrame.Active = true
windowFrame.Draggable = true
windowFrame.Parent = screenGui

local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1,   0,   0,   30)
titleBar.Position = UDim2.new(0,   0,   0,   0)
titleBar.BackgroundColor3 = Color3.fromRGB(40,   40,   40)
titleBar.Parent = windowFrame

local titleText = Instance.new("TextLabel")
titleText.Name = "Title"
titleText.Size = UDim2.new(1,   -90,   1,   0)
titleText.Position = UDim2.new(0,   10,   0,   0)
titleText.BackgroundTransparency = 1
titleText.Text = "Blox Fruit Hub"
titleText.TextColor3 = Color3.fromRGB(255,   255,   255)
titleText.TextSize = 16
titleText.Font = Enum.Font.SourceSansSemibold
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Parent = titleBar

local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0,   20,   0,   20)
minimizeButton.Position = UDim2.new(1,   -55,   0,   5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(70,   70,   70)
minimizeButton.Text = "_"
minimizeButton.TextColor3 = Color3.fromRGB(255,   255,   255)
minimizeButton.TextSize = 14
minimizeButton.Font = Enum.Font.SourceSansBold
minimizeButton.Parent = titleBar

local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0,   20,   0,   20)
closeButton.Position = UDim2.new(1,   -30,   0,   5)
closeButton.BackgroundColor3 = Color3.fromRGB(200,   0,   0)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255,   255,   255)
closeButton.TextSize = 14
closeButton.Font = Enum.Font.SourceSansBold
closeButton.Parent = titleBar

local tabContainer = Instance.new("Frame")
tabContainer.Name = "TabContainer"
tabContainer.Size = UDim2.new(1,   0,   0,   40)
tabContainer.Position = UDim2.new(0,   0,   0,   30)
tabContainer.BackgroundColor3 = Color3.fromRGB(50,   50,   50)
tabContainer.BorderSizePixel = 0
tabContainer.Parent = windowFrame

local contentArea = Instance.new("Frame")
contentArea.Name = "ContentArea"
contentArea.Size = UDim2.new(1,   0,   1,   -70)
contentArea.Position = UDim2.new(0,   0,   0,   70)
contentArea.BackgroundTransparency = 1
contentArea.Parent = windowFrame

local tabs = {}
local currentTab = nil
local isMinimized = false

minimizeButton.MouseButton1Click: Connect(function()
    isMinimized = not isMinimized
    if isMinimized then
        contentArea.Visible = false
        tabContainer.Visible = false
        windowFrame.Size = UDim2.new(0,   400,   0,   30)
        minimizeButton.Text = ""
    else
        contentArea.Visible = true
        tabContainer.Visible = true
        windowFrame.Size = UDim2.new(0,   400,   0,   300)
        minimizeButton.Text = "_"
    end
end)

closeButton.MouseButton1Click: Connect(function()
    screenGui: Destroy()
end)

local function createTab(name)
    local tabButton = Instance.new("TextButton")
    tabButton.Name = name .. "Tab"
    tabButton.Size = UDim2.new(0,   100,   1,   -10)
    tabButton.Position = UDim2.new(0,   10 + (#tabs * 110),   0,   5)
    tabButton.BackgroundColor3 = Color3.fromRGB(70,   70,   70)
    tabButton.Text = name
    tabButton.TextColor3 = Color3.fromRGB(200,   200,   200)
    tabButton.TextSize = 14
    tabButton.Font = Enum.Font.SourceSans
    tabButton.Parent = tabContainer
    
    local tabContent = Instance.new("Frame")
    tabContent.Name = name .. "Content"
    tabContent.Size = UDim2.new(1,   -20,   1,   -20)
    tabContent.Position = UDim2.new(0,   10,   0,   10)
    tabContent.BackgroundTransparency = 1
    tabContent.Visible = false
    tabContent.Parent = contentArea
    
    local uiStroke = Instance.new("UIStroke")
    uiStroke.Color = Color3.fromRGB(100,   100,   100)
    uiStroke.Thickness = 1
    uiStroke.Parent = tabButton
    
    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0,   5)
    uiCorner.Parent = tabButton
    
    tabs[name] = {
        button = tabButton,  
        content = tabContent
    }
    
    tabButton.MouseButton1Click: Connect(function()
        if currentTab then
            tabs[currentTab].button.BackgroundColor3 = Color3.fromRGB(70,   70,   70)
            tabs[currentTab].content.Visible = false
        end
        
        tabButton.BackgroundColor3 = Color3.fromRGB(90,   90,   90)
        tabContent.Visible = true
        currentTab = name
    end)
    
    return tabContent
end

local mainTab = createTab("Main")
local settingsTab = createTab("Settings")

-- Autofarm Variables
local autofarmEnabled = false
local fastAttackEnabled = false
local bringMobsEnabled = false
local selectedMob = "Bandit"
local farmDistance = 50

-- Mob Options
local mobOptions = {
    "Bandit", 
    "Monkey", 
    "Pirate", 
    "Brute", 
    "Dragon"
}

-- Function to find nearest mob
local function findNearestMob()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character or not character: FindFirstChild("HumanoidRootPart") then return nil end
    
    local rootPart = character.HumanoidRootPart
    local nearestMob = nil
    local nearestDistance = math.huge
    
    for _,  v in pairs(workspace: GetChildren()) do
        if v: FindFirstChild("Humanoid") and v: FindFirstChild("HumanoidRootPart") then
            local mobName = string.lower(v.Name)
            local selectedName = string.lower(selectedMob)
            
            if string.find(mobName,  selectedName) or string.find(selectedName,  mobName) then
                local distance = (v.HumanoidRootPart.Position - rootPart.Position).Magnitude
                if distance <= farmDistance and distance < nearestDistance then
                    nearestMob = v
                    nearestDistance = distance
                end
            end
        end
    end
    
    return nearestMob
end

-- Function to bring mobs
local function bringMobs()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character or not character: FindFirstChild("HumanoidRootPart") then return end
    
    local rootPart = character.HumanoidRootPart
    
    for _,  v in pairs(workspace: GetChildren()) do
        if v: FindFirstChild("Humanoid") and v: FindFirstChild("HumanoidRootPart") then
            local mobName = string.lower(v.Name)
            local selectedName = string.lower(selectedMob)
            
            if string.find(mobName,  selectedName) or string.find(selectedName,  mobName) then
                local distance = (v.HumanoidRootPart.Position - rootPart.Position).Magnitude
                if distance <= farmDistance then
                    v.HumanoidRootPart.CFrame = rootPart.CFrame * CFrame.new(math.random(-5,  5),  0,  math.random(-5,  5))
                end
            end
        end
    end
end

-- Function to attack mob
local function attackMob(mob)
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    local tool = nil
    for _,  v in pairs(player: GetChildren()) do
        if v:IsA("BackpackItem") then
            tool = v
            break
        end
    end
    
    if tool then
        tool.Parent = character
        if tool: FindFirstChild("RemoteFunction") then
            tool.RemoteFunction: InvokeServer("Attack")
        elseif tool: FindFirstChild("RemoteEvent") then
            tool.RemoteEvent: FireServer("Attack")
        end
    end
end

-- Autofarm Loop
spawn(function()
    while true do
        if autofarmEnabled then
            local mob = findNearestMob()
            if mob then
                if fastAttackEnabled then
                    attackMob(mob)
                end
                
                if bringMobsEnabled then
                    bringMobs()
                end
            end
        end
        wait(0.1)
    end
end)

-- Main Tab UI
local autofarmLabel = Instance.new("TextLabel")
autofarmLabel.Size = UDim2.new(0,   150,   0,   30)
autofarmLabel.Position = UDim2.new(0,   0,   0,   0)
autofarmLabel.BackgroundTransparency = 1
autofarmLabel.Text = "Auto Farm:  "
autofarmLabel.TextColor3 = Color3.fromRGB(220,   220,   220)
autofarmLabel.TextSize = 14
autofarmLabel.Font = Enum.Font.SourceSans
autofarmLabel.TextXAlignment = Enum.TextXAlignment.Left
autofarmLabel.Parent = mainTab

local autofarmButton = Instance.new("TextButton")
autofarmButton.Size = UDim2.new(0,   80,   0,   30)
autofarmButton.Position = UDim2.new(0,   160,   0,   0)
autofarmButton.BackgroundColor3 = Color3.fromRGB(150,   0,   0)
autofarmButton.Text = "OFF"
autofarmButton.TextColor3 = Color3.fromRGB(255,   255,   255)
autofarmButton.TextSize = 14
autofarmButton.Font = Enum.Font.SourceSans

local autofarmCorner = Instance.new("UICorner")
autofarmCorner.CornerRadius = UDim.new(0,   5)
autofarmCorner.Parent = autofarmButton

local autofarmStroke = Instance.new("UIStroke")
autofarmStroke.Color = Color3.fromRGB(100,   100,   100)
autofarmStroke.Thickness = 1
autofarmStroke.Parent = autofarmButton

autofarmButton.Parent = mainTab

autofarmButton.MouseButton1Click: Connect(function()
    autofarmEnabled = not autofarmEnabled
    autofarmButton.Text = autofarmEnabled and "ON" or "OFF"
    autofarmButton.BackgroundColor3 = autofarmEnabled and Color3.fromRGB(0,   150,   0) or Color3.fromRGB(150,   0,   0)
end)

local fastAttackLabel = Instance.new("TextLabel")
fastAttackLabel.Size = UDim2.new(0,   150,   0,   30)
fastAttackLabel.Position = UDim2.new(0,   0,   0,   40)
fastAttackLabel.BackgroundTransparency = 1
fastAttackLabel.Text = "Fast Attack:  "
fastAttackLabel.TextColor3 = Color3.fromRGB(220,   220,   220)
fastAttackLabel.TextSize = 14
fastAttackLabel.Font = Enum.Font.SourceSans
fastAttackLabel.TextXAlignment = Enum.TextXAlignment.Left
fastAttackLabel.Parent = mainTab

local fastAttackButton = Instance.new("TextButton")
fastAttackButton.Size = UDim2.new(0,   80,   0,   30)
fastAttackButton.Position = UDim2.new(0,   160,   0,   40)
fastAttackButton.BackgroundColor3 = Color3.fromRGB(150,   0,   0)
fastAttackButton.Text = "OFF"
fastAttackButton.TextColor3 = Color3.fromRGB(255,   255,   255)
fastAttackButton.TextSize = 14
fastAttackButton.Font = Enum.Font.SourceSans

local fastAttackCorner = Instance.new("UICorner")
fastAttackCorner.CornerRadius = UDim.new(0,   5)
fastAttackCorner.Parent = fastAttackButton

local fastAttackStroke = Instance.new("UIStroke")
fastAttackStroke.Color = Color3.fromRGB(100,   100,   100)
fastAttackStroke.Thickness = 1
fastAttackStroke.Parent = fastAttackButton

fastAttackButton.Parent = mainTab

fastAttackButton.MouseButton1Click: Connect(function()
    fastAttackEnabled = not fastAttackEnabled
    fastAttackButton.Text = fastAttackEnabled and "ON" or "OFF"
    fastAttackButton.BackgroundColor3 = fastAttackEnabled and Color3.fromRGB(0,   150,   0) or Color3.fromRGB(150,   0,   0)
end)

local bringMobsLabel = Instance.new("TextLabel")
bringMobsLabel.Size = UDim2.new(0,   150,   0,   30)
bringMobsLabel.Position = UDim2.new(0,   0,   0,   80)
bringMobsLabel.BackgroundTransparency = 1
bringMobsLabel.Text = "Bring Mobs:  "
bringMobsLabel.TextColor3 = Color3.fromRGB(220,   220,   220)
bringMobsLabel.TextSize = 14
bringMobsLabel.Font = Enum.Font.SourceSans
bringMobsLabel.TextXAlignment = Enum.TextXAlignment.Left
bringMobsLabel.Parent = mainTab

local bringMobsButton = Instance.new("TextButton")
bringMobsButton.Size = UDim2.new(0,   80,   0,   30)
bringMobsButton.Position = UDim2.new(0,   160,   0,   80)
bringMobsButton.BackgroundColor3 = Color3.fromRGB(150,   0,   0)
bringMobsButton.Text = "OFF"
bringMobsButton.TextColor3 = Color3.fromRGB(255,   255,   255)
bringMobsButton.TextSize = 14
bringMobsButton.Font = Enum.Font.SourceSans

local bringMobsCorner = Instance.new("UICorner")
bringMobsCorner.CornerRadius = UDim.new(0,   5)
bringMobsCorner.Parent = bringMobsButton

local bringMobsStroke = Instance.new("UIStroke")
bringMobsStroke.Color = Color3.fromRGB(100,   100,   100)
bringMobsStroke.Thickness = 1
bringMobsStroke.Parent = bringMobsButton

bringMobsButton.Parent = mainTab

bringMobsButton.MouseButton1Click: Connect(function()
    bringMobsEnabled = not bringMobsEnabled
    bringMobsButton.Text = bringMobsEnabled and "ON" or "OFF"
    bringMobsButton.BackgroundColor3 = bringMobsEnabled and Color3.fromRGB(0,   150,   0) or Color3.fromRGB(150,   0,   0)
end)

local mobSelectorLabel = Instance.new("TextLabel")
mobSelectorLabel.Size = UDim2.new(0,   150,   0,   30)
mobSelectorLabel.Position = UDim2.new(0,   0,   0,   120)
mobSelectorLabel.BackgroundTransparency = 1
mobSelectorLabel.Text = "Select Mob:  "
mobSelectorLabel.TextColor3 = Color3.fromRGB(220,   220,   220)
mobSelectorLabel.TextSize = 14
mobSelectorLabel.Font = Enum.Font.SourceSans
mobSelectorLabel.TextXAlignment = Enum.TextXAlignment.Left
mobSelectorLabel.Parent = mainTab

local mobDropdown = Instance.new("TextButton")
mobDropdown.Size = UDim2.new(0,   120,   0,   30)
mobDropdown.Position = UDim2.new(0,   160,   0,   120)
mobDropdown.BackgroundColor3 = Color3.fromRGB(70,   70,   70)
mobDropdown.Text = selectedMob
mobDropdown.TextColor3 = Color3.fromRGB(255,   255,   255)
mobDropdown.TextSize = 14
mobDropdown.Font = Enum.Font.SourceSans

local mobDropdownCorner = Instance.new("UICorner")
mobDropdownCorner.CornerRadius = UDim.new(0,   5)
mobDropdownCorner.Parent = mobDropdown

local mobDropdownStroke = Instance.new("UIStroke")
mobDropdownStroke.Color = Color3.fromRGB(100,   100,   100)
mobDropdownStroke.Thickness = 1
mobDropdownStroke.Parent = mobDropdown

mobDropdown.Parent = mainTab

-- Mob selection dropdown logic
local mobDropdownOpen = false
mobDropdown.MouseButton1Click: Connect(function()
    mobDropdownOpen = not mobDropdownOpen
    if mobDropdownOpen then
        local dropdownFrame = Instance.new("Frame")
        dropdownFrame.Size = UDim2.new(0,   120,   0,   #mobOptions * 25)
        dropdownFrame.Position = UDim2.new(0,   160,   0,   155)
        dropdownFrame.BackgroundColor3 = Color3.fromRGB(50,   50,   50)
        dropdownFrame.BorderSizePixel = 0
        dropdownFrame.ZIndex = 10
        dropdownFrame.Parent = mainTab
        
        local dropdownCorner = Instance.new("UICorner")
        dropdownCorner.CornerRadius = UDim.new(0,   5)
        dropdownCorner.Parent = dropdownFrame
        
        local dropdownStroke = Instance.new("UIStroke")
        dropdownStroke.Color = Color3.fromRGB(100,   100,   100)
        dropdownStroke.Thickness = 1
        dropdownStroke.Parent = dropdownFrame
        
        for i,  mob in ipairs(mobOptions) do
            local optionButton = Instance.new("TextButton")
            optionButton.Size = UDim2.new(1,   0,   0,   25)
            optionButton.Position = UDim2.new(0,   0,   0,   (i - 1) * 25)
            optionButton.BackgroundColor3 = Color3.fromRGB(70,   70,   70)
            optionButton.Text = mob
            optionButton.TextColor3 = Color3.fromRGB(255,   255,   255)
            optionButton.TextSize = 12
            optionButton.Font = Enum.Font.SourceSans
            optionButton.BorderSizePixel = 0
            optionButton.ZIndex = 11
            optionButton.Parent = dropdownFrame
            
            local optionCorner = Instance.new("UICorner")
            optionCorner.CornerRadius = UDim.new(0,   3)
            optionCorner.Parent = optionButton
            
            optionButton.MouseButton1Click: Connect(function()
                selectedMob = mob
                mobDropdown.Text = mob
                dropdownFrame: Destroy()
                mobDropdownOpen = false
            end)
        end
        
        -- Close dropdown when clicking elsewhere
        local function closeDropdown()
            dropdownFrame: Destroy()
            mobDropdownOpen = false
        end
        
        dropdownFrame:GetPropertyChangedSignal("AbsoluteSize"): Connect(closeDropdown)
    end
end)

-- Settings Tab UI
local settingsLabel = Instance.new("TextLabel")
settingsLabel.Size = UDim2.new(1,   0,   0,   30)
settingsLabel.Position = UDim2.new(0,   0,   0,   0)
settingsLabel.BackgroundTransparency = 1
settingsLabel.Text = "Settings Panel"
settingsLabel.TextColor3 = Color3.fromRGB(255,   255,   255)
settingsLabel.TextSize = 18
settingsLabel.Font = Enum.Font.SourceSans
settingsLabel.Parent = settingsTab

local toggleLabel = Instance.new("TextLabel")
toggleLabel.Size = UDim2.new(0,   150,   0,   30)
toggleLabel.Position = UDim2.new(0,   0,   0,   40)
toggleLabel.BackgroundTransparency = 1
toggleLabel.Text = "Enable Feature:  "
toggleLabel.TextColor3 = Color3.fromRGB(220,   220,   220)
toggleLabel.TextSize = 14
toggleLabel.Font = Enum.Font.SourceSans
toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
toggleLabel.Parent = settingsTab

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0,   80,   0,   30)
toggleButton.Position = UDim2.new(0,   160,   0,   40)
toggleButton.BackgroundColor3 = Color3.fromRGB(70,   70,   70)
toggleButton.Text = "OFF"
toggleButton.TextColor3 = Color3.fromRGB(200,   200,   200)
toggleButton.TextSize = 14
toggleButton.Font = Enum.Font.SourceSans

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0,   5)
toggleCorner.Parent = toggleButton

local toggleStroke = Instance.new("UIStroke")
toggleStroke.Color = Color3.fromRGB(100,   100,   100)
toggleStroke.Thickness = 1
toggleStroke.Parent = toggleButton

toggleButton.Parent = settingsTab

local featureEnabled = false
toggleButton.MouseButton1Click: Connect(function()
    featureEnabled = not featureEnabled
    toggleButton.Text = featureEnabled and "ON" or "OFF"
    toggleButton.BackgroundColor3 = featureEnabled and Color3.fromRGB(0,   150,   0) or Color3.fromRGB(150,   0,   0)
end)

local windowCorner = Instance.new("UICorner")
windowCorner.CornerRadius = UDim.new(0,   8)
windowCorner.Parent = windowFrame

local windowStroke = Instance.new("UIStroke")
windowStroke.Color = Color3.fromRGB(60,   60,   60)
windowStroke.Thickness = 2
windowStroke.Parent = windowFrame

tabs["Main"].button.BackgroundColor3 = Color3.fromRGB(90,   90,   90)
tabs["Main"].content.Visible = true
currentTab = "Main"
